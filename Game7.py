#day 7
input_graph = """......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^.^.^....................................................................
.............................................................................................................................................
...................................................................^.....^...................................................................
.............................................................................................................................................
..................................................................^.^...^.^..................................................................
.............................................................................................................................................
.................................................................^.^.^...^.^.................................................................
.............................................................................................................................................
................................................................^.^...^.^.^.^................................................................
.............................................................................................................................................
...............................................................^.^.^.......^.^...............................................................
.............................................................................................................................................
..............................................................^.^...^...^.^.^.^..............................................................
.............................................................................................................................................
.............................................................^.^.^.^.^.^.....^.^.............................................................
.............................................................................................................................................
............................................................^.......^.^.^...^...^............................................................
.............................................................................................................................................
...........................................................^...^.^.^...^...^...^.^...........................................................
.............................................................................................................................................
..........................................................^.^.^.....^.......^...^.^..........................................................
.............................................................................................................................................
.........................................................^...^.^.^.^.....^.....^.^.^.........................................................
.............................................................................................................................................
........................................................^.......^.^.^.^.^.^.^.....^.^........................................................
.............................................................................................................................................
.......................................................^.^.^.^.....^.^.^.^.^.^.^.^...^.......................................................
.............................................................................................................................................
......................................................^.........^.^...^.^.^.^...^.^.^.^......................................................
.............................................................................................................................................
.....................................................^...^.^.^.^...^.^.^.^...^.^.^.^.^.^.....................................................
.............................................................................................................................................
....................................................^.^...^...^.^.^.^.^...^.^.^...^...^.^....................................................
.............................................................................................................................................
...................................................^.^...^.^...^.^.^.^.^.^.^.....^.^.....^...................................................
.............................................................................................................................................
..................................................^.....^.^.....^.^.^.......^.....^...^.^.^..................................................
.............................................................................................................................................
.................................................^...^.^...^.^.^.^...^.^.^.^.^.^.^...^.....^.................................................
.............................................................................................................................................
................................................^...^.^.^.^.^.^.^.^.......^...^.^.^.^...^...^................................................
.............................................................................................................................................
...............................................^.^...^.^...^...^.^.^.^...^.^.....^...^.^.^.^.^...............................................
.............................................................................................................................................
..............................................^...^.^...^...^.^...^.^.^.^...^.^...^.^.^...^.^.^..............................................
.............................................................................................................................................
.............................................^.^.........^.^.....^.^.^.^.^...^...^...^.....^...^.............................................
.............................................................................................................................................
............................................^.^.^...^.^...^...^.^.^.^.^.^.....^.^.^.....^.^...^.^............................................
.............................................................................................................................................
...........................................^...^.^.^.^.^.^...^...^...^.^.......^...^.^.^.^.^.^.^.^...........................................
.............................................................................................................................................
..........................................^.......^.^.^.^.^...^.^.^.^...^.^...^.^.^.....^...^.^...^..........................................
.............................................................................................................................................
.........................................^...^.^...^...^...^.^...^.^.^.^.^...^.....^...^...^.^.^...^.........................................
.............................................................................................................................................
........................................^.^.^.^.^.....^.^.^.....^...^.^.^.^.^.^.^.^...^.^...^...^...^........................................
.............................................................................................................................................
.......................................^...^.^...^.^.^...^.^...^.........^...^.^.....^.^...^.^.^.^...^.......................................
.............................................................................................................................................
......................................^...^...^.....^...^.......^.^...^...^.....^...........^.^.^.^.^.^......................................
.............................................................................................................................................
.....................................^...^.^.^.^.^.^.....^.^.^.^.^.^.....^...^.^.^.^...^.....^.^.^...^.^.....................................
.............................................................................................................................................
....................................^...........^...^.......^.^.^.^.........^.^.^...^.....^.^.^.^.......^....................................
.............................................................................................................................................
...................................^.^.^...^.^.^.....^.....^.^.^.^.^.^.^...^.^.^.^.^...^.^...^.^.^.^...^.^...................................
.............................................................................................................................................
..................................^...^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...^...^.^.^.^.^.^.^.^..................................
.............................................................................................................................................
.................................^...^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^...^.^.......^.^.................................
.............................................................................................................................................
................................^.^.^.^.^...^.^.......^.^.^.^.^.^.....^.^.^...^.......^...^...^.^.^.....^...^................................
.............................................................................................................................................
...............................^.....^.^.......^.^...^.^...^.^.^...^...^.^.^.........^.^.^.^.^.....^...^...^.^...............................
.............................................................................................................................................
..............................^.^.^...^.....^.^...^.^.^.^.^.^.^.^.........^.^...^...^...^.^.^...^...^.^.^.....^..............................
.............................................................................................................................................
.............................^.^.....^.......^.^.^.^.^.^...^.....^.^.^.^...^.^.^...^.^.^.^.^.^...^.^.^.^...^.^.^.............................
.............................................................................................................................................
............................^.......^...^.^.^.....^...^.^.^.^.^.^.^...^...^.......^.^...^.^.^.^.........^.^...^.^............................
.............................................................................................................................................
...........................^...^...^.^.^.^...^.^...^...^.^...^.^.^.^.^.^.....^...^.^.....^.^.^.^...^.........^...^...........................
.............................................................................................................................................
..........................^.^.^.^.^.^.....^...^...^.^.^.....^...^.^.^...^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.....^...^..........................
.............................................................................................................................................
.........................^.^.^.......^.^.^.....^.^.^.^...^.^.^...^...^...^.^...^.^.....^.^.^.........^.....^.^.^...^.........................
.............................................................................................................................................
........................^.^.^.....^.^...^.^.......^.^.^.....^.^.^.......^.^.....^.^.^.^.^.^.^...^.....^.^.^.^.^.^...^........................
.............................................................................................................................................
.......................^.^.^.....^.^.........^.^.........^...^...^.^.....^.^.^.^.....^...^.^.^.^.^.....^.^.^...^.....^.......................
.............................................................................................................................................
......................^...^.^.^.....^.^.^...^.^.^.^.^...^...^...^.^.^.^...^.^...^.^.^.^.^...^.^...^...^.^.....^...^...^......................
.............................................................................................................................................
.....................^...^.^.^.....^.^.^...^.^.^...^.^.^.....^...^.......^.^.^.^...^.^.^.^.^.^.^.^...^.^.....^.^.^.^...^.....................
.............................................................................................................................................
....................^...^.^.^.....^...^...^.^...^...^...^.....^.^...^...^...^.......^...^.^...^.^...^.......^.^.......^.^....................
.............................................................................................................................................
...................^.^.^.............^.^.^...^.^.^.....^...^...^.^...^.^.^.^.^.................^.^.^.^.^.^.^.^.^.^...^.^.^...................
.............................................................................................................................................
..................^.^.....^.^.^.....^.^...^.^...^.^.^.^.^.^...^.^.^.^.^.^...^...^.^.^.^.......^.^.^.^.^.^.^.^.^.....^.^.^.^..................
.............................................................................................................................................
.................^.....^...^.....^...^.^.^...^...^.^...^...^.^.^...^.^.^.^...^...^.^.^.^.^...^.^.....^...^.^...^.^.......^.^.................
.............................................................................................................................................
................^.^...^...^.^.^...^.^.^.^.^.^.....^...^.^...^.^...^...^.^.....^...^...^.^...^...^...^...^.^...^.^.^.....^...^................
.............................................................................................................................................
...............^.^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.....^.^.^.......^.....^.^.^.......^.....^.^...^.^...^...^.^.^.^.....^.^...............
.............................................................................................................................................
..............^.^.^...^.^.^.....^.^.^.......^...^.^...^.^.^...^.^.^.^.^.^.........^.^.^.^.^.^...^...^.^.......^...^.^.....^.^.^..............
.............................................................................................................................................
.............^...^.......^...^.^.^.^...^.^.......^.^.^.^.....^.^.^...^...^.....^.^...^.^...^.^...^.^.^.^...^.......^.^.....^.^.^.............
.............................................................................................................................................
............^.^.^...^...^...^.^.^...^.......^...^...^.....^.^.^...^...^.^...^.^.^.^...^.^...^.^.^...^.^.^...^.^.^.^.^.^.....^...^............
.............................................................................................................................................
...........^.^.^...^.......^.^.^.^.^.....^...^...^.^.^.^.....^...^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^.^.^.^.^.^.^...........
.............................................................................................................................................
..........^.^.....^.^...^.....^...^.^.^...^.^.^.^.^...^...^.^...^.^.^...^.......^.^.^.^.^.^.......^.....^...^...^.^.......^...^...^..........
.............................................................................................................................................
.........^.^.....^.^.^.^.^.^.^...^...^.....^.^.^.....^.^.^.^.^.^...^...^...^.^.^...^.^.^.^.....^...^.^.^...^.^...^.^.........^.^.^.^.........
.............................................................................................................................................
........^.^.^.^.^.....^.^...^.^.^...^.^.^.^.......^...^...^.....^.^.....^.^.^...^.^.^...^.^...^.^...^.^.....^...^.....^.^.^.^.^.^...^........
.............................................................................................................................................
.......^.....^...^...^.....^.^.....^...^.^.^...^.^.....^.^.^.^.^...^...^.^.^.^.....^.^.^.^.^.^.^.^...^.^.^...^.^...^.^...^...^...^.^.^.......
.............................................................................................................................................
......^...^...^.......^...^.^...^.^.^.......^.^.^.^.^.....^.^.....^...^.^.^.........^...^...^.^.^...^.^...^.^.^.^.^...^.^.^.^.^.^.....^......
.............................................................................................................................................
.....^...^.^.^...^...^.^.......^.^.^.^.^.^.....^...^...^.^.^.^.^.^.^.......^...^.^...^.^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^...^.^.^.....^.....
.............................................................................................................................................
....^.........^.^.^...^.^...^.^.^.^...^.^.....^.^.^.^.....^.^.^.^.....^.^.^...^.....^.^.^...^.^.^.^.....^...^.......^.^...^.^.^...^.^...^....
.............................................................................................................................................
...^.......^...^.^.^.^...^.............^.^...^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.....^...^.^.^.....^.^.^...^.^.^.^.^.........^.^.^.^.^.^.^...
.............................................................................................................................................
..^.^.^.^...^...^.^.^.^...^.^.......^...^.^.^.^.^.^.^.^.^...^.^...^.....^.^...^.^.........^.^...^.^.^.^.....^.^.^...^.....^.^.....^.^.^.^.^..
.............................................................................................................................................
.^...^.^.^.^...^.^.^.^.^.....^...^.....^.^.^...^...^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.........^.^.^.....^.^.^.^.^.^.^.^...^...^.^.^...^...^.
............................................................................................................................................."""

#parsing input
graph_lines = input_graph.splitlines()
graph = [[0 for i in range(len(graph_lines[0]))] for j in range(len(graph_lines))]
for i in range(len(graph)):
    for j in range(len(graph[0])):
        if graph_lines[i][j] == "^":
            graph[i][j] = 1

#solution part1:
num_splits=0
for line in graph:
    for elem in line:
        num_splits += elem

#remove splits not hit by beams
#start from bottom
for i in range(len(graph)-1,0,-1):
    for j in range(len(graph[0])):
        #if split found
        if graph[i][j] == 1:
            #chech if in lines above we find before splits on the vertical or in diagonal.
            # if on the vertical, the split ij will not be hit: remove it
            for k in range(i-1, -1, -1):
                if graph[k][j] == 1:
                    num_splits -= 1
                    break
                elif j-1 >= 0 and graph[k][j-1] == 1:
                    break
                elif j+1 < len(graph[0]) and graph[k][j+1] == 1:
                    break
print("Solution1: ", num_splits)


#solution part 2

#parsing input
graph_lines = input_graph.splitlines()
graph = [[] for j in range(2,len(graph_lines),2)]
k = 0
max_graph = 0
for i in range(2,len(graph_lines),2):
    for j in range(len(graph_lines[0])):
        if graph_lines[i][j] == "^":
            graph[k].append(j)
    max_tmp = max(graph[k])
    k += 1
    if max_tmp > max_graph:
        max_graph = max_tmp

paths = [0 for i in range(max_graph+2)]
new_paths = [0 for i in range(max_graph+2)]

paths[graph[0][0]] = 1

for i in range(len(graph)):
    for j in range(len(paths)):
        found = False
        for k in range(len(graph[i])):
            if paths[j] > 0 and graph[i][k] == j:
                new_paths[j-1] += paths[j]
                new_paths[j+1] += paths[j]
                found = True
                break
        if not found:
            new_paths[j] += paths[j]
    for l in range(len(new_paths)):
        paths[l] = new_paths[l]
        new_paths[l] = 0

solution2 = 0
for elem in paths:
    solution2 += elem

print("Solution2: ", solution2)